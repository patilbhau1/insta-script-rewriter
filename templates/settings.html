{% extends "base.html" %}

{% block title %}Settings - Script Rewriter{% endblock %}

{% block content %}
<div class="container">
    <header class="page-header">
        <h1>âš™ï¸ Settings</h1>
        <p class="subtitle">Configure your script generation preferences</p>
    </header>

    <!-- API Settings -->
    <div class="settings-section">
        <h2>ğŸ”‘ API Configuration</h2>
        <div class="settings-card">
            <div class="setting-item">
                <label for="apiKey">Groq API Key</label>
                <input type="password" id="apiKey" value="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" readonly>
                <p class="setting-help">Your API key is configured via .env file</p>
            </div>
            <div class="setting-item">
                <label>API Status</label>
                <div class="status-indicator">
                    <span class="status-dot active"></span>
                    <span>Connected</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Generation Settings -->
    <div class="settings-section">
        <h2>âœ¨ Generation Preferences</h2>
        <div class="settings-card">
            <div class="setting-item">
                <label for="modelSelect">AI Model</label>
                <select id="modelSelect" class="setting-select">
                    <option value="llama-3.3-70b-versatile" selected>LLaMA 3.3 70B (Recommended)</option>
                    <option value="llama-3.1-70b-versatile">LLaMA 3.1 70B</option>
                    <option value="mixtral-8x7b">Mixtral 8x7B</option>
                </select>
                <p class="setting-help">Choose the AI model for script generation</p>
            </div>
            <div class="setting-item">
                <label for="temperature">Creativity Level</label>
                <input type="range" id="temperature" min="0" max="10" value="7" class="setting-slider">
                <div class="slider-labels">
                    <span>Conservative</span>
                    <span>Balanced</span>
                    <span>Creative</span>
                </div>
                <p class="setting-help">Higher values = more creative output</p>
            </div>
        </div>
    </div>

    <!-- Processing Settings -->
    <div class="settings-section">
        <h2>ğŸ¬ Video Processing</h2>
        <div class="settings-card">
            <div class="setting-item">
                <label class="setting-checkbox">
                    <input type="checkbox" checked>
                    <span>Auto-delete uploaded videos after processing</span>
                </label>
                <p class="setting-help">Saves disk space (recommended)</p>
            </div>
            <div class="setting-item">
                <label class="setting-checkbox">
                    <input type="checkbox" checked>
                    <span>Enable real-time processing updates</span>
                </label>
                <p class="setting-help">Shows live progress during generation</p>
            </div>
            <div class="setting-item">
                <label for="maxFileSize">Max File Size (MB)</label>
                <input type="number" id="maxFileSize" value="100" min="10" max="500" class="setting-input">
                <p class="setting-help">Maximum video file size for uploads</p>
            </div>
        </div>
    </div>

    <!-- Storage & Cleanup -->
    <div class="settings-section">
        <h2>ğŸ’¾ Storage & Cleanup</h2>
        <div class="settings-card">
            <div class="setting-item">
                <label>Storage Usage</label>
                <div id="storageInfo" class="storage-info">
                    <div class="storage-loading">Loading storage info...</div>
                </div>
            </div>
            <div class="setting-item">
                <label>Cleanup Videos</label>
                <button class="btn-warning" onclick="cleanupUploads()">ğŸ—‘ï¸ Delete All Uploaded Videos</button>
                <p class="setting-help">Deletes video files but keeps your script history</p>
            </div>
        </div>
    </div>

    <!-- History Settings -->
    <div class="settings-section">
        <h2>ğŸ“œ History & Data</h2>
        <div class="settings-card">
            <div class="setting-item">
                <label class="setting-checkbox">
                    <input type="checkbox" checked>
                    <span>Save generation history</span>
                </label>
                <p class="setting-help">Keep records of all generated scripts</p>
            </div>
            <div class="setting-item">
                <label for="historyLimit">History Limit</label>
                <select id="historyLimit" class="setting-select">
                    <option value="50">Last 50 scripts</option>
                    <option value="100" selected>Last 100 scripts</option>
                    <option value="500">Last 500 scripts</option>
                    <option value="unlimited">Unlimited</option>
                </select>
                <p class="setting-help">How many scripts to keep in history</p>
            </div>
            <div class="setting-item">
                <button class="btn-danger" onclick="clearHistory()">ğŸ—‘ï¸ Clear All History</button>
                <p class="setting-help">âš ï¸ This action cannot be undone</p>
            </div>
        </div>
    </div>

    <!-- Export/Import -->
    <div class="settings-section">
        <h2>ğŸ’¾ Data Management</h2>
        <div class="settings-card">
            <div class="setting-item">
                <label>Export Data</label>
                <button class="btn-secondary" onclick="exportData()">ğŸ“¥ Export All Scripts (JSON)</button>
                <p class="setting-help">Download all your scripts as JSON file</p>
            </div>
            <div class="setting-item">
                <label>Import Data</label>
                <input type="file" id="importFile" accept=".json" style="display:none">
                <button class="btn-secondary" onclick="document.getElementById('importFile').click()">ğŸ“¤ Import Scripts</button>
                <p class="setting-help">Upload previously exported data</p>
            </div>
        </div>
    </div>

    <!-- About -->
    <div class="settings-section">
        <h2>â„¹ï¸ About</h2>
        <div class="settings-card">
            <div class="about-info">
                <p><strong>Version:</strong> 2.0.0</p>
                <p><strong>AI Models:</strong> Whisper-large-v3, LLaMA 3.3</p>
                <p><strong>Last Updated:</strong> January 2026</p>
                <p><strong>GitHub:</strong> <a href="#">View Repository</a></p>
            </div>
        </div>
    </div>

    <div class="settings-actions">
        <button class="btn-primary" onclick="saveSettings()">ğŸ’¾ Save Settings</button>
        <button class="btn-secondary" onclick="resetSettings()">ğŸ”„ Reset to Defaults</button>
    </div>
</div>

<script src="{{ url_for('static', filename='js/settings.js') }}"></script>
{% endblock %}
